<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Bowl LIX - La Gran Final </title>
    <style>
        :root { 
            --nfl-blue: #013369; 
            --nfl-red: #D50A0A; 
            --bg: #05070a; 
            --card: #11151c; 
            --gold: #d4af37; 
            --silver: #e5e4e2;
            --glass: rgba(255, 255, 255, 0.03);
        }
        
        body { 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            background: radial-gradient(circle at center, #1a202c 0%, var(--bg) 100%); 
            color: white; 
            margin: 0; 
            padding: 20px; 
            min-height: 100vh;
        }

        .container { 
            max-width: 850px; 
            margin: 0 auto; 
            background: var(--card); 
            padding: 40px; 
            border-radius: 24px; 
            border: 1px solid rgba(212, 175, 55, 0.3); 
            box-shadow: 0 20px 50px rgba(0,0,0,0.8), inset 0 0 20px rgba(212, 175, 55, 0.05);
            position: relative;
            overflow: hidden;
        }

        /* Brillo decorativo */
        .container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.05) 0%, transparent 70%);
            pointer-events: none;
        }

        /* Podio de Gala */
        .podium-title { text-align: center; letter-spacing: 4px; color: var(--gold); font-weight: 300; margin-bottom: 25px; text-transform: uppercase; }
        .podium { display: flex; justify-content: center; align-items: flex-end; gap: 12px; margin-bottom: 50px; height: 140px; }
        .rank { 
            text-align: center; 
            width: 110px; 
            border-radius: 12px 12px 4px 4px; 
            padding: 15px 5px; 
            font-weight: bold; 
            color: #000; 
            position: relative;
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }
        .first { background: linear-gradient(to bottom, #f9e394, var(--gold)); height: 130px; order: 2; z-index: 2; border: 1px solid #fff; }
        .second { background: linear-gradient(to bottom, #ffffff, var(--silver)); height: 100px; order: 1; }
        .third { background: linear-gradient(to bottom, #dfa878, #CD7F32); height: 80px; order: 3; }
        .points-label { display: block; font-size: 1.2rem; margin-top: 5px; }

        /* Secci贸n del Gran Juego */
        .sb-header { text-align: center; margin-bottom: 40px; }
        .sb-header h1 { font-size: 3rem; margin: 0; background: linear-gradient(to bottom, #fff, #999); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 900; }
        
        .main-matchup { 
            background: var(--glass); 
            border-radius: 20px; 
            padding: 40px 20px; 
            display: flex; 
            align-items: center; 
            justify-content: space-around; 
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 40px;
        }

        .team { 
            cursor: pointer; 
            text-align: center; 
            width: 40%; 
            padding: 25px; 
            border-radius: 20px; 
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
        }
        .team img { width: 120px; height: 120px; object-fit: contain; transition: 0.4s; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.5)); }
        .team h3 { margin-top: 15px; letter-spacing: 2px; font-size: 1.1rem; color: #eee; }
        .team:hover { background: rgba(255,255,255,0.05); transform: translateY(-5px); }
        .team.selected { 
            background: rgba(1, 51, 105, 0.3); 
            border-color: var(--gold); 
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.2);
        }
        .team.selected img { transform: scale(1.1); filter: drop-shadow(0 0 20px rgba(255,255,255,0.4)); }

        .vs-glow { font-size: 3rem; font-weight: 900; color: var(--gold); font-style: italic; opacity: 0.8; }

        /* Inputs y Botones */
        .input-group { text-align: center; margin-bottom: 30px; }
        input[type="text"] { 
            width: 70%; 
            padding: 18px; 
            background: #000; 
            border: 1px solid #333; 
            color: white; 
            border-radius: 12px; 
            font-size: 1.1rem; 
            text-align: center; 
            outline: none;
            transition: 0.3s;
        }
        input[type="text"]:focus { border-color: var(--gold); box-shadow: 0 0 15px rgba(212, 175, 55, 0.1); }

        .btn-confirm { 
            width: 100%; 
            padding: 22px; 
            border-radius: 12px; 
            border: none; 
            background: linear-gradient(45deg, var(--nfl-red), #8b0000); 
            color: white; 
            font-weight: 900; 
            font-size: 1.3rem; 
            cursor: pointer; 
            text-transform: uppercase; 
            letter-spacing: 3px;
            transition: 0.3s;
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }
        .btn-confirm:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 15px 25px rgba(211, 10, 10, 0.3); }
        .btn-confirm:active { transform: translateY(0); }
        .btn-confirm:disabled { background: #333; color: #777; cursor: not-allowed; }

        /* Tabla General */
        h2.table-title { margin-top: 60px; font-weight: 300; letter-spacing: 2px; text-align: center; color: #9ab; }
        .tabla-container { background: #000; border-radius: 16px; overflow: hidden; border: 1px solid #222; margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #0a0d12; padding: 20px; text-transform: uppercase; font-size: 0.75rem; color: var(--gold); letter-spacing: 1px; }
        td { padding: 18px; border-top: 1px solid #1a1a1a; text-align: center; }
        .name-cell { text-align: left; padding-left: 25px; font-weight: 600; color: var(--silver); }
        .winner-cell { color: #4ade80; font-weight: bold; background: rgba(74, 222, 128, 0.05); }
        .loser-cell { color: #f87171; opacity: 0.8; }
        .total-cell { font-size: 1.1rem; color: #fff; }

        @media (max-width: 600px) {
            .main-matchup { flex-direction: column; gap: 30px; }
            .team { width: 80%; }
            .rank { width: 80px; }
            .container { padding: 20px; }
            .sb-header h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="podium-title">Clasificaci贸n de la Temporada</div>
    <div class="podium">
        <div class="rank second"><br>Mara<br><span class="points-label">10 pts</span></div>
        <div class="rank first"><br>Marco<br><span class="points-label">11 pts</span></div>
        <div class="rank third"><br>TINO/Esthela<br><span class="points-label">9 pts</span></div>
    </div>

    <div class="sb-header">
        <h1>SUPER BOWL LIX</h1>
        <p style="color: var(--gold); letter-spacing: 5px; margin-top: 10px; font-weight: bold;">LA GRAN FINAL</p>
    </div>
    
    <div class="input-group">
        <input type="text" id="user-name" placeholder="Escribe tu nombre oficial">
    </div>

    <div class="main-matchup">
        <div class="team" id="opt-Patriots" onclick="selectWinner('Patriots')">
            <img src="https://a.espncdn.com/i/teamlogos/nfl/500/ne.png" alt="Patriots">
            <h3>PATRIOTS</h3>
        </div>
        <div class="vs-glow">VS</div>
        <div class="team" id="opt-Seahawks" onclick="selectWinner('Seahawks')">
            <img src="https://a.espncdn.com/i/teamlogos/nfl/500/sea.png" alt="Seahawks">
            <h3>SEAHAWKS</h3>
        </div>
    </div>

    <button class="btn-confirm" id="btn-submit" onclick="submitBet()">Enviar Pron贸stico Final</button>
    <p id="status" style="display:none; text-align: center; color: var(--gold); margin-top: 20px; font-weight: bold; font-style: italic;">Grabando tu destino en la historia...</p>

    <h2 class="table-title">Marcador Global de la Familia</h2>
    <div class="tabla-container">
        <table>
            <thead>
                <tr>
                    <th style="text-align: left; padding-left: 25px;">Participante</th>
                    <th>Elecci贸n SB</th>
                    <th>Pts SB</th>
                    <th>Total Final</th>
                </tr>
            </thead>
            <tbody id="leaderboard"></tbody>
        </table>
    </div>
</div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzgct7Iw7dpJfdGMgQymRXIUkv8BhUZxAHdx8SthRewbra5_nLb-f5OcKmsp0gNmsQs/exec";
    const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTtskqdvjMDVBAPqHzOt9RtjMEjUrlYd3YpnOWC7o09G3ezFe15hkhiKaPf6SnotgZYsI7vetYP-Eps/pub?output=csv";

    const historicalPoints = { "Marco": 11, "Mara": 10, "TINO": 9, "Esthela": 9, "Marlongo": 4, "Mariana": 0 };
    
    // --- GANADOR OFICIAL (Completar cuando termine) ---
    const sbWinner = ""; 

    let chosenTeam = "";

    function selectWinner(team) {
        chosenTeam = team;
        document.querySelectorAll('.team').forEach(t => t.classList.remove('selected'));
        document.getElementById('opt-' + team).classList.add('selected');
    }

    async function submitBet() {
        const name = document.getElementById('user-name').value.trim();
        if (!name || !chosenTeam) return alert("Debes poner tu nombre y elegir a un campe贸n para la historia.");

        document.getElementById('btn-submit').disabled = true;
        document.getElementById('status').style.display = "block";

        try {
            await fetch(SCRIPT_URL, { 
                method: 'POST', 
                mode: 'no-cors', 
                body: JSON.stringify({ nombre: name, p1: chosenTeam, p2: "SUPERBOWL", p3:"", p4:"", p5:"", p6:"" }) 
            });
            alert("隆Tu destino ha sido sellado! Suerte en el Super Bowl.");
            location.reload();
        } catch (e) {
            alert("Error al conectar con los servidores.");
            document.getElementById('btn-submit').disabled = false;
        }
    }

    async function loadResults() {
        const res = await fetch(CSV_URL + "?cb=" + Date.now());
        const text = await res.text();
        const rows = text.split('\n').slice(1);
        const tableBody = document.getElementById('leaderboard');
        tableBody.innerHTML = "";

        rows.forEach(row => {
            const cols = row.split(',');
            if (cols.length < 3) return;
            const name = cols[1].trim();
            const pick = cols[2].trim();
            
            let sbPts = 0;
            let cellClass = "";
            if (sbWinner !== "") {
                if (pick === sbWinner) {
                    sbPts = 1; 
                    cellClass = "winner-cell";
                } else {
                    cellClass = "loser-cell";
                }
            }

            const total = (historicalPoints[name] || 0) + sbPts;
            tableBody.innerHTML += `<tr>
                <td class="name-cell">${name}</td>
                <td class="${cellClass}">${pick.toUpperCase()}</td>
                <td>${sbPts}</td>
                <td class="total-cell"><strong>${total}</strong></td>
            </tr>`;
        });
    }

    loadResults();
</script>
</body>
</html>
